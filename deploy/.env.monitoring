# =================================
# 在线时间工具 - 监控服务环境变量配置
# =================================
# 此文件包含所有监控相关的环境变量配置

# ==================== 监控服务端口配置 ====================

# Prometheus - 指标收集
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_TIME=200h
PROMETHEUS_STORAGE_PATH=./data/prometheus

# AlertManager - 告警管理
ALERTMANAGER_PORT=9093
ALERTMANAGER_STORAGE_PATH=./data/alertmanager

# Grafana - 可视化面板
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_PASSWORD=admin123
GRAFANA_ALLOW_SIGNUP=false
GRAFANA_ANONYMOUS_ENABLED=false

# Loki - 日志聚合
LOKI_PORT=3100
LOKI_STORAGE_PATH=./data/loki
LOKI_RETENTION_PERIOD=168h

# Promtail - 日志收集
PROMTAIL_PORT=9080

# ==================== Exporters 端口配置 ====================

# Node Exporter - 系统指标
NODE_EXPORTER_PORT=9100

# cAdvisor - 容器指标  
CADVISOR_PORT=8080

# Redis Exporter - Redis指标
REDIS_EXPORTER_MASTER_PORT=9121
REDIS_EXPORTER_SLAVE_PORT=9122

# Nginx Exporter - Nginx指标
NGINX_EXPORTER_PORT=9113

# ==================== 告警通知配置 ====================

# 邮件告警配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=alerts@yourcompany.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=alerts@yourcompany.com

# 收件人配置
ALERT_EMAIL_CRITICAL=ops-team@yourcompany.com
ALERT_EMAIL_WARNING=dev-team@yourcompany.com
ALERT_EMAIL_INFO=monitoring@yourcompany.com

# Slack 告警配置
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#alerts
SLACK_USERNAME=AlertBot
SLACK_ICON_EMOJI=:rotating_light:

# Webhook 告警配置
WEBHOOK_URL=http://localhost:5001/alerts
WEBHOOK_USERNAME=admin
WEBHOOK_PASSWORD=webhook-password

# ==================== 告警阈值配置 ====================

# 系统资源告警阈值
CPU_WARNING_THRESHOLD=80
CPU_CRITICAL_THRESHOLD=90
MEMORY_WARNING_THRESHOLD=85
MEMORY_CRITICAL_THRESHOLD=95
DISK_WARNING_THRESHOLD=80
DISK_CRITICAL_THRESHOLD=95

# 应用性能告警阈值
RESPONSE_TIME_WARNING=0.5
RESPONSE_TIME_CRITICAL=1.0
ERROR_RATE_WARNING=0.01
ERROR_RATE_CRITICAL=0.05
THROUGHPUT_WARNING=1

# 网络告警阈值
NETWORK_TRAFFIC_WARNING=100000000  # 100MB/s
CONNECTION_WARNING=800
CONNECTION_CRITICAL=900

# ==================== 监控数据配置 ====================

# Prometheus 数据收集间隔
SCRAPE_INTERVAL_DEFAULT=15s
SCRAPE_INTERVAL_FAST=10s
SCRAPE_INTERVAL_SLOW=30s

# 数据保留配置
PROMETHEUS_RETENTION_SIZE=50GB
LOKI_RETENTION_SIZE=20GB

# 监控目标配置
MONITOR_APP_INSTANCES=true
MONITOR_SYSTEM_METRICS=true
MONITOR_CONTAINER_METRICS=true
MONITOR_NETWORK_METRICS=true

# ==================== 安全配置 ====================

# 监控服务访问控制
MONITORING_ADMIN_USER=admin
MONITORING_ADMIN_PASSWORD=monitoring123

# Grafana 安全配置
GRAFANA_COOKIE_SECURE=false
GRAFANA_COOKIE_SAMESITE=lax
GRAFANA_SESSION_LIFETIME=24h

# AlertManager 安全配置
ALERTMANAGER_AUTH_ENABLED=false
ALERTMANAGER_USERNAME=admin
ALERTMANAGER_PASSWORD=alertmanager123

# ==================== 性能优化配置 ====================

# Prometheus 性能配置
PROMETHEUS_QUERY_MAX_CONCURRENCY=20
PROMETHEUS_QUERY_TIMEOUT=2m
PROMETHEUS_MAX_SAMPLES=50000000

# Grafana 性能配置
GRAFANA_DATABASE_MAX_OPEN_CONN=20
GRAFANA_DATABASE_MAX_IDLE_CONN=5
GRAFANA_DATABASE_CONN_MAX_LIFETIME=14400

# Loki 性能配置
LOKI_INGESTION_RATE_MB=4
LOKI_INGESTION_BURST_SIZE_MB=6
LOKI_MAX_LOOK_BACK_PERIOD=0s

# ==================== 集群配置 ====================

# 多实例配置 (高可用模式)
PROMETHEUS_CLUSTER_ENABLED=false
PROMETHEUS_CLUSTER_PEER_PORT=9094

ALERTMANAGER_CLUSTER_ENABLED=false
ALERTMANAGER_CLUSTER_PEER_PORT=9095

# 外部服务集成
EXTERNAL_PROMETHEUS_URL=
EXTERNAL_GRAFANA_URL=
EXTERNAL_LOKI_URL=

# ==================== 开发和调试配置 ====================

# 调试模式
DEBUG_MONITORING=false
VERBOSE_LOGGING=false

# 测试配置
ENABLE_TEST_METRICS=false
MOCK_ALERTS_ENABLED=false

# 开发工具
PROMETHEUS_WEB_ENABLE_ADMIN_API=false
GRAFANA_EXPLORE_ENABLED=true
GRAFANA_ALERTING_ENABLED=true

# ==================== 备份和恢复配置 ====================

# 监控数据备份
MONITORING_BACKUP_ENABLED=true
MONITORING_BACKUP_SCHEDULE="0 2 * * *"
MONITORING_BACKUP_RETENTION_DAYS=30
MONITORING_BACKUP_PATH=./data/monitoring-backups

# 配置备份
CONFIG_BACKUP_ENABLED=true
CONFIG_BACKUP_SCHEDULE="0 3 * * 0"
CONFIG_BACKUP_PATH=./data/config-backups

# ==================== 第三方集成配置 ====================

# PagerDuty 集成
PAGERDUTY_ENABLED=false
PAGERDUTY_SERVICE_KEY=your-pagerduty-service-key

# Datadog 集成
DATADOG_ENABLED=false
DATADOG_API_KEY=your-datadog-api-key

# AWS CloudWatch 集成
CLOUDWATCH_ENABLED=false
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-west-2

# ==================== 自定义配置 ====================

# 自定义标签
MONITORING_ENVIRONMENT=production
MONITORING_TEAM=ops
MONITORING_VERSION=1.0.0

# 自定义指标
CUSTOM_METRICS_ENABLED=true
BUSINESS_METRICS_ENABLED=true
USER_METRICS_ENABLED=true

# 自定义仪表板
CUSTOM_DASHBOARDS_PATH=./config/grafana/custom-dashboards
DASHBOARD_AUTO_IMPORT=true

# ==================== 实验性功能 ====================

# 新功能开关
ENABLE_TRACING=false
ENABLE_PROFILING=false
ENABLE_METRICS_FEDERATION=false
ENABLE_LOG_STREAMING=false

# 高级功能
ENABLE_ANOMALY_DETECTION=false
ENABLE_PREDICTIVE_SCALING=false
ENABLE_AUTO_REMEDIATION=false