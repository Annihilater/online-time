# åœ¨çº¿æ—¶é—´å·¥å…· - è¿ç»´ç›‘æ§ç³»ç»Ÿæ€»ç»“

## é¡¹ç›®æ¦‚è¿°

åœ¨çº¿æ—¶é—´å·¥å…·ç°å·²é…å¤‡å®Œæ•´çš„è¿ç»´ç›‘æ§åŠŸèƒ½ï¼Œç¡®ä¿åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„é«˜å¯ç”¨æ€§ã€å¯è§‚æµ‹æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚æœ¬ç³»ç»Ÿé›†æˆäº†ç°ä»£åŒ–çš„ç›‘æ§æ ˆï¼Œæä¾›å…¨æ–¹ä½çš„ç³»ç»Ÿæ´å¯Ÿå’Œè‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›ã€‚

## ğŸ¯ æ ¸å¿ƒèƒ½åŠ›

### 1. å…¨æ ˆç›‘æ§è¦†ç›–
- âœ… **åº”ç”¨å±‚ç›‘æ§**: HTTPè¯·æ±‚ã€å“åº”æ—¶é—´ã€é”™è¯¯ç‡ã€ä¸šåŠ¡æŒ‡æ ‡
- âœ… **ç³»ç»Ÿå±‚ç›‘æ§**: CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œèµ„æºç›‘æ§
- âœ… **å®¹å™¨å±‚ç›‘æ§**: Dockerå®¹å™¨èµ„æºä½¿ç”¨å’Œå¥åº·çŠ¶æ€
- âœ… **ç½‘ç»œå±‚ç›‘æ§**: è´Ÿè½½å‡è¡¡ã€ä»£ç†æœåŠ¡ã€è¿æ¥çŠ¶æ€

### 2. æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ
- âœ… **å¤šçº§å‘Šè­¦**: Critical/Warning/Infoä¸‰çº§å‘Šè­¦æœºåˆ¶
- âœ… **å¤šæ¸ é“é€šçŸ¥**: é‚®ä»¶ã€Slackã€Webhooké€šçŸ¥æ”¯æŒ
- âœ… **å‘Šè­¦æŠ‘åˆ¶**: é¿å…å‘Šè­¦é£æš´çš„æ™ºèƒ½æŠ‘åˆ¶è§„åˆ™
- âœ… **å‘Šè­¦èšåˆ**: ç›¸å…³å‘Šè­¦çš„è‡ªåŠ¨åˆ†ç»„å’Œèšåˆ

### 3. æ—¥å¿—ç®¡ç†ä½“ç³»
- âœ… **ç»“æ„åŒ–æ—¥å¿—**: ç»Ÿä¸€çš„æ—¥å¿—æ ¼å¼å’Œæ ‡å‡†
- âœ… **é›†ä¸­æ”¶é›†**: Loki + Promtail æ—¥å¿—èšåˆæ–¹æ¡ˆ
- âœ… **æ™ºèƒ½åˆ†æ**: é”™è¯¯æ—¥å¿—è‡ªåŠ¨æ£€æµ‹å’Œåˆ†æ
- âœ… **æ—¥å¿—è½®è½¬**: è‡ªåŠ¨åŒ–çš„æ—¥å¿—æ¸…ç†å’Œå½’æ¡£ç­–ç•¥

### 4. å¯è§†åŒ–ä»ªè¡¨æ¿
- âœ… **åº”ç”¨æ¦‚è§ˆ**: æœåŠ¡çŠ¶æ€ã€æ€§èƒ½æŒ‡æ ‡ä¸€ç›®äº†ç„¶
- âœ… **ç³»ç»Ÿèµ„æº**: ä¸»æœºèµ„æºä½¿ç”¨è¶‹åŠ¿å›¾è¡¨
- âœ… **ä¸šåŠ¡æŒ‡æ ‡**: ç”¨æˆ·æ´»è·ƒåº¦ã€åŠŸèƒ½ä½¿ç”¨ç»Ÿè®¡
- âœ… **è‡ªå®šä¹‰é¢æ¿**: æ”¯æŒè‡ªå®šä¹‰ç›‘æ§é¢æ¿

### 5. è‡ªåŠ¨åŒ–è¿ç»´
- âœ… **å¥åº·æ£€æŸ¥**: è‡ªåŠ¨åŒ–çš„å…¨é¢å¥åº·æ£€æŸ¥
- âœ… **æ€§èƒ½ç›‘æ§**: å®æ—¶æ€§èƒ½æ•°æ®æ”¶é›†å’Œåˆ†æ
- âœ… **æ•…éšœè¯Šæ–­**: æ™ºèƒ½åŒ–çš„é—®é¢˜è¯Šæ–­å’ŒæŠ¥å‘Š
- âœ… **å®šæ—¶ç»´æŠ¤**: è‡ªåŠ¨åŒ–çš„ç³»ç»Ÿç»´æŠ¤å’Œæ¸…ç†

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç›‘æ§æŠ€æœ¯æ ˆ

```mermaid
graph TB
    subgraph "æ•°æ®æºå±‚"
        A[åº”ç”¨æœåŠ¡] --> E[Exporters]
        B[ç³»ç»Ÿèµ„æº] --> E
        C[å®¹å™¨æœåŠ¡] --> E
        D[æ—¥å¿—æ–‡ä»¶] --> F[Promtail]
    end
    
    subgraph "æ•°æ®å¤„ç†å±‚"
        E --> G[Prometheus]
        F --> H[Loki]
        G --> I[AlertManager]
    end
    
    subgraph "å±•ç¤ºå±‚"
        G --> J[Grafana]
        H --> J
        I --> K[é€šçŸ¥æ¸ é“]
    end
```

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | åŠŸèƒ½ | ç«¯å£ | çŠ¶æ€ |
|------|------|------|------|
| **Prometheus** | æŒ‡æ ‡æ”¶é›†å’Œå­˜å‚¨ | 9090 | âœ… å·²é…ç½® |
| **Grafana** | æ•°æ®å¯è§†åŒ–é¢æ¿ | 3001 | âœ… å·²é…ç½® |
| **AlertManager** | å‘Šè­¦ç®¡ç†å’Œé€šçŸ¥ | 9093 | âœ… å·²é…ç½® |
| **Loki** | æ—¥å¿—èšåˆç³»ç»Ÿ | 3100 | âœ… å·²é…ç½® |
| **Promtail** | æ—¥å¿—æ”¶é›†å™¨ | 9080 | âœ… å·²é…ç½® |
| **Node Exporter** | ç³»ç»ŸæŒ‡æ ‡å¯¼å‡º | 9100 | âœ… å·²é…ç½® |
| **cAdvisor** | å®¹å™¨æŒ‡æ ‡å¯¼å‡º | 8080 | âœ… å·²é…ç½® |
| **Redis Exporter** | RedisæŒ‡æ ‡å¯¼å‡º | 9121/9122 | âœ… å·²é…ç½® |
| **Nginx Exporter** | NginxæŒ‡æ ‡å¯¼å‡º | 9113 | âœ… å·²é…ç½® |

## ğŸ“ ç›®å½•ç»“æ„

```
deploy/
â”œâ”€â”€ ğŸ“ config/
â”‚   â”œâ”€â”€ ğŸ“ monitoring/           # ç›‘æ§é…ç½®ç›®å½•
â”‚   â”‚   â”œâ”€â”€ ğŸ“ prometheus/       # Prometheusè§„åˆ™å’Œé…ç½®
â”‚   â”‚   â”œâ”€â”€ ğŸ“ alertmanager/     # AlertManageré…ç½®
â”‚   â”‚   â””â”€â”€ ğŸ“ loki/             # Lokiæ—¥å¿—é…ç½®
â”‚   â”œâ”€â”€ ğŸ“ grafana/              # Grafanaé…ç½®
â”‚   â”‚   â”œâ”€â”€ ğŸ“ provisioning/     # æ•°æ®æºå’Œä»ªè¡¨æ¿é…ç½®
â”‚   â”‚   â””â”€â”€ ğŸ“ dashboards/       # é¢„ç½®ä»ªè¡¨æ¿
â”‚   â””â”€â”€ ğŸ“ cron/                 # å®šæ—¶ä»»åŠ¡é…ç½®
â”œâ”€â”€ ğŸ“ scripts/                  # è¿ç»´è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ ğŸ”§ health-check.sh       # å¥åº·æ£€æŸ¥è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ”§ monitor.sh            # æ€§èƒ½ç›‘æ§è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ”§ diagnose.sh           # æ•…éšœè¯Šæ–­è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ”§ maintenance.sh        # ç³»ç»Ÿç»´æŠ¤è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ”§ setup-cron.sh         # å®šæ—¶ä»»åŠ¡è®¾ç½®
â”‚   â””â”€â”€ ğŸ”§ ops-quick.sh          # å¿«é€Ÿè¿ç»´æ“ä½œ
â”œâ”€â”€ ğŸ“ data/                     # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ prometheus/           # Prometheusæ•°æ®
â”‚   â”œâ”€â”€ ğŸ“ grafana/              # Grafanaæ•°æ®
â”‚   â”œâ”€â”€ ğŸ“ loki/                 # Lokiæ—¥å¿—æ•°æ®
â”‚   â””â”€â”€ ğŸ“ backups/              # å¤‡ä»½æ–‡ä»¶
â”œâ”€â”€ ğŸ“ logs/                     # æ—¥å¿—ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ cron/                 # å®šæ—¶ä»»åŠ¡æ—¥å¿—
â”‚   â”œâ”€â”€ ğŸ“ diagnose/             # è¯Šæ–­æŠ¥å‘Š
â”‚   â””â”€â”€ ğŸ“ reports/              # æ€§èƒ½æŠ¥å‘Š
â””â”€â”€ ğŸ“„ docker-compose.ha.yml     # é«˜å¯ç”¨éƒ¨ç½²é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨å®Œæ•´ç›‘æ§æ ˆ

```bash
# è¿›å…¥éƒ¨ç½²ç›®å½•
cd /path/to/online-time/deploy

# å¯åŠ¨é«˜å¯ç”¨æ¨¡å¼ï¼ˆåŒ…å«å®Œæ•´ç›‘æ§ï¼‰
./deploy.sh ha

# æˆ–è€…ä¸ºç°æœ‰éƒ¨ç½²æ·»åŠ ç›‘æ§
./deploy.sh basic --monitoring
```

### 2. è®¿é—®ç›‘æ§é¢æ¿

| æœåŠ¡ | åœ°å€ | é»˜è®¤å‡­æ® | åŠŸèƒ½ |
|------|------|----------|------|
| **Grafana** | http://localhost:3001 | admin/admin123 | ä¸»è¦ç›‘æ§é¢æ¿ |
| **Prometheus** | http://localhost:9090 | - | æŒ‡æ ‡æŸ¥è¯¢å’Œé…ç½® |
| **AlertManager** | http://localhost:9093 | - | å‘Šè­¦ç®¡ç† |
| **HAProxy Stats** | http://localhost:8404/stats | - | è´Ÿè½½å‡è¡¡çŠ¶æ€ |

### 3. è¿è¡Œè¿ç»´è„šæœ¬

```bash
# å¿«é€ŸçŠ¶æ€æ£€æŸ¥
./scripts/ops-quick.sh status

# å…¨é¢å¥åº·æ£€æŸ¥
./scripts/health-check.sh

# å®æ—¶ç›‘æ§
./scripts/monitor.sh realtime

# å®Œæ•´è¯Šæ–­
./scripts/diagnose.sh full
```

## ğŸ“Š ç›‘æ§æŒ‡æ ‡è¯´æ˜

### åº”ç”¨æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡åç§° | æè¿° | å‘Šè­¦é˜ˆå€¼ | å½±å“çº§åˆ« |
|---------|------|----------|----------|
| `up` | æœåŠ¡å¯ç”¨æ€§ | = 0 | Critical |
| `http_request_duration_seconds` | å“åº”æ—¶é—´ | P95 > 0.5s | Warning |
| `http_requests_total` | è¯·æ±‚æ€»æ•° | é”™è¯¯ç‡ > 1% | Critical |
| `active_users_total` | æ´»è·ƒç”¨æˆ·æ•° | < 10 | Info |

### ç³»ç»Ÿèµ„æºæŒ‡æ ‡

| æŒ‡æ ‡åç§° | æè¿° | å‘Šè­¦é˜ˆå€¼ | å½±å“çº§åˆ« |
|---------|------|----------|----------|
| `node_cpu_seconds_total` | CPUä½¿ç”¨ç‡ | > 80% | Warning |
| `node_memory_MemAvailable_bytes` | å¯ç”¨å†…å­˜ | < 15% | Warning |
| `node_filesystem_avail_bytes` | å¯ç”¨ç£ç›˜ | < 10% | Critical |
| `node_load1` | ç³»ç»Ÿè´Ÿè½½ | > CPUæ ¸å¿ƒæ•° Ã— 2 | Warning |

### å®¹å™¨æŒ‡æ ‡

| æŒ‡æ ‡åç§° | æè¿° | å‘Šè­¦é˜ˆå€¼ | å½±å“çº§åˆ« |
|---------|------|----------|----------|
| `container_cpu_usage_seconds_total` | å®¹å™¨CPU | > 80% | Warning |
| `container_memory_usage_bytes` | å®¹å™¨å†…å­˜ | > 90%é™åˆ¶ | Warning |
| `container_network_receive_bytes_total` | ç½‘ç»œæµé‡ | > 100MB/s | Info |

## ğŸ”” å‘Šè­¦é…ç½®

### å‘Šè­¦çº§åˆ«å®šä¹‰

- **Critical**: æœåŠ¡å®Œå…¨ä¸å¯ç”¨ï¼Œéœ€è¦ç«‹å³å¤„ç†
- **Warning**: æ€§èƒ½ä¸‹é™æˆ–èµ„æºä½¿ç”¨è¿‡é«˜ï¼Œéœ€è¦å…³æ³¨
- **Info**: çŠ¶æ€å˜åŒ–é€šçŸ¥ï¼Œå¯ä»¥å»¶åå¤„ç†

### é€šçŸ¥æ¸ é“é…ç½®

#### é‚®ä»¶é€šçŸ¥
```yaml
# config/monitoring/alertmanager/alertmanager.yml
receivers:
  - name: 'email-critical'
    email_configs:
      - to: 'ops-team@company.com'
        subject: '[CRITICAL] {{ .GroupLabels.alertname }}'
```

#### Slacké€šçŸ¥
```yaml
receivers:
  - name: 'slack-alerts'
    slack_configs:
      - api_url: 'https://hooks.slack.com/...'
        channel: '#alerts'
```

## ğŸ› ï¸ è¿ç»´å·¥å…·ä½¿ç”¨

### å¥åº·æ£€æŸ¥å·¥å…·

```bash
# å®Œæ•´å¥åº·æ£€æŸ¥
./scripts/health-check.sh

# æ£€æŸ¥å†…å®¹åŒ…æ‹¬ï¼š
# âœ“ Dockerå®¹å™¨çŠ¶æ€
# âœ“ åº”ç”¨æœåŠ¡å¯ç”¨æ€§
# âœ“ ç³»ç»Ÿèµ„æºä½¿ç”¨
# âœ“ ç½‘ç»œè¿é€šæ€§
# âœ“ æ—¥å¿—é”™è¯¯æ£€æŸ¥
# âœ“ æ€§èƒ½åŸºå‡†æµ‹è¯•
```

### æ€§èƒ½ç›‘æ§å·¥å…·

```bash
# ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
./scripts/monitor.sh report

# å®æ—¶ç›‘æ§ï¼ˆ30ç§’ï¼‰
./scripts/monitor.sh realtime 30

# æ€§èƒ½åŸºå‡†æµ‹è¯•
./scripts/monitor.sh benchmark

# å•ç‹¬ç›‘æ§ç³»ç»Ÿ/å®¹å™¨/åº”ç”¨
./scripts/monitor.sh system
./scripts/monitor.sh containers  
./scripts/monitor.sh app
```

### æ•…éšœè¯Šæ–­å·¥å…·

```bash
# å¿«é€Ÿè¯Šæ–­
./scripts/diagnose.sh quick

# å®Œæ•´è¯Šæ–­ï¼ˆç”ŸæˆHTMLæŠ¥å‘Šï¼‰
./scripts/diagnose.sh full

# å•é¡¹è¯Šæ–­
./scripts/diagnose.sh docker    # Dockerç¯å¢ƒ
./scripts/diagnose.sh network   # ç½‘ç»œè¿é€šæ€§
./scripts/diagnose.sh logs      # æ—¥å¿—åˆ†æ
./scripts/diagnose.sh performance # æ€§èƒ½ç“¶é¢ˆ
```

### ç³»ç»Ÿç»´æŠ¤å·¥å…·

```bash
# æ—¥å¸¸ç»´æŠ¤
./scripts/maintenance.sh daily

# å‘¨ç»´æŠ¤
./scripts/maintenance.sh weekly

# æœˆç»´æŠ¤
./scripts/maintenance.sh monthly

# ç´§æ€¥ç»´æŠ¤
./scripts/maintenance.sh emergency

# è‡ªå®šä¹‰ç»´æŠ¤ä»»åŠ¡
./scripts/maintenance.sh custom cleanup docker logs
```

### å¿«é€Ÿè¿ç»´æ“ä½œ

```bash
# æ˜¾ç¤ºæœåŠ¡çŠ¶æ€
./scripts/ops-quick.sh status

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
./scripts/ops-quick.sh logs nginx 100

# é‡å¯æœåŠ¡
./scripts/ops-quick.sh restart app

# ç³»ç»Ÿæ¸…ç†
./scripts/ops-quick.sh cleanup full

# æœåŠ¡æ‰©å®¹
./scripts/ops-quick.sh scale 5

# å¿«é€Ÿå¤‡ä»½
./scripts/ops-quick.sh backup
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### åº”ç”¨å±‚ä¼˜åŒ–

1. **å¯ç”¨ç¼“å­˜**
   - Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
   - Nginxé™æ€èµ„æºç¼“å­˜
   - æµè§ˆå™¨ç¼“å­˜é…ç½®

2. **è´Ÿè½½å‡è¡¡ä¼˜åŒ–**
   ```yaml
   # HAProxyé…ç½®ä¼˜åŒ–
   balance roundrobin
   option httpchk GET /health
   ```

3. **è¿æ¥æ± ä¼˜åŒ–**
   ```yaml
   # Redisè¿æ¥æ± é…ç½®
   REDIS_POOL_SIZE=20
   REDIS_POOL_TIMEOUT=5000
   ```

### ç³»ç»Ÿå±‚ä¼˜åŒ–

1. **èµ„æºé™åˆ¶é…ç½®**
   ```yaml
   services:
     app:
       deploy:
         resources:
           limits:
             cpus: '1.0'
             memory: 512M
   ```

2. **å†…æ ¸å‚æ•°è°ƒä¼˜**
   ```bash
   # /etc/sysctl.conf
   net.core.somaxconn = 1024
   net.ipv4.tcp_max_syn_backlog = 1024
   ```

### ç›‘æ§ä¼˜åŒ–

1. **é‡‡é›†é¢‘ç‡è°ƒæ•´**
   - å…³é”®æŒ‡æ ‡: 15s
   - ä¸€èˆ¬æŒ‡æ ‡: 30s
   - è¯¦ç»†æŒ‡æ ‡: 1m

2. **æ•°æ®ä¿ç•™ç­–ç•¥**
   - åŸå§‹æ•°æ®: 7å¤©
   - èšåˆæ•°æ®: 30å¤©
   - å†å²æ•°æ®: 90å¤©

## ğŸ”’ å®‰å…¨é…ç½®

### è®¿é—®æ§åˆ¶

1. **æœåŠ¡è®¤è¯**
   ```yaml
   # Grafanaå®‰å…¨é…ç½®
   GF_SECURITY_ADMIN_PASSWORD: ${GRAFANA_PASSWORD}
   GF_USERS_ALLOW_SIGN_UP: false
   GF_AUTH_ANONYMOUS_ENABLED: false
   ```

2. **ç½‘ç»œéš”ç¦»**
   - å†…éƒ¨æœåŠ¡ä½¿ç”¨ç‹¬ç«‹ç½‘ç»œ
   - ä»…å¼€æ”¾å¿…è¦ç«¯å£
   - é…ç½®é˜²ç«å¢™è§„åˆ™

### æ•°æ®ä¿æŠ¤

1. **æ•æ„Ÿä¿¡æ¯å¤„ç†**
   - ç¯å¢ƒå˜é‡å­˜å‚¨å¯†ç 
   - æ—¥å¿—è„±æ•å¤„ç†
   - å®šæœŸå¯†ç è½®æ¢

2. **å¤‡ä»½åŠ å¯†**
   - å¤‡ä»½æ–‡ä»¶åŠ å¯†å­˜å‚¨
   - å¼‚åœ°å¤‡ä»½ç­–ç•¥
   - æ¢å¤æµ‹è¯•éªŒè¯

## ğŸ•’ å®šæ—¶ä»»åŠ¡

### è‡ªåŠ¨åŒ–ä»»åŠ¡

```bash
# è®¾ç½®å®šæ—¶ä»»åŠ¡
./scripts/setup-cron.sh setup

# å®šæ—¶ä»»åŠ¡åŒ…æ‹¬ï¼š
# â€¢ æ¯5åˆ†é’Ÿ: å¥åº·æ£€æŸ¥
# â€¢ æ¯15åˆ†é’Ÿ: æ€§èƒ½ç›‘æ§
# â€¢ æ¯å°æ—¶: ç³»ç»Ÿæ¸…ç†
# â€¢ æ¯å¤©: å¤‡ä»½å’Œæ—¥å¿—è½®è½¬
# â€¢ æ¯å‘¨: æ·±åº¦ç»´æŠ¤
# â€¢ æ¯æœˆ: æŠ¥å‘Šç”Ÿæˆ
```

### ä»»åŠ¡ç›‘æ§

```bash
# æŸ¥çœ‹å®šæ—¶ä»»åŠ¡çŠ¶æ€
./scripts/setup-cron.sh status

# éªŒè¯å®šæ—¶ä»»åŠ¡é…ç½®
./scripts/setup-cron.sh verify

# å¸è½½å®šæ—¶ä»»åŠ¡
./scripts/setup-cron.sh uninstall
```

## ğŸ“‹ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜å¿«é€Ÿè§£å†³

#### 1. æœåŠ¡æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
./scripts/ops-quick.sh logs nginx

# æ‰§è¡Œå¥åº·æ£€æŸ¥
./scripts/health-check.sh

# å¦‚æœéœ€è¦ï¼Œé‡å¯æœåŠ¡
./scripts/ops-quick.sh restart all
```

#### 2. æ€§èƒ½é—®é¢˜
```bash
# å®æ—¶ç›‘æ§ç³»ç»Ÿèµ„æº
./scripts/ops-quick.sh monitor 60

# æ€§èƒ½ç“¶é¢ˆåˆ†æ
./scripts/diagnose.sh performance

# æ‰§è¡Œç³»ç»Ÿæ¸…ç†
./scripts/ops-quick.sh cleanup full
```

#### 3. ç£ç›˜ç©ºé—´ä¸è¶³
```bash
# ç´§æ€¥ç©ºé—´æ¸…ç†
./scripts/maintenance.sh emergency

# æ¸…ç†Dockerèµ„æº
docker system prune -af --volumes

# å‹ç¼©æ—§æ—¥å¿—
./scripts/maintenance.sh custom compress
```

## ğŸ“Š ç›‘æ§é¢æ¿

### é¢„é…ç½®ä»ªè¡¨æ¿

1. **åº”ç”¨æ¦‚è§ˆä»ªè¡¨æ¿**
   - æœåŠ¡å¯ç”¨æ€§çŠ¶æ€
   - HTTPè¯·æ±‚ç»Ÿè®¡
   - å“åº”æ—¶é—´è¶‹åŠ¿
   - é”™è¯¯ç‡ç›‘æ§

2. **ç³»ç»Ÿèµ„æºä»ªè¡¨æ¿**
   - CPU/å†…å­˜/ç£ç›˜ä½¿ç”¨ç‡
   - ç½‘ç»œæµé‡ç›‘æ§
   - ç³»ç»Ÿè´Ÿè½½è¶‹åŠ¿
   - å®¹å™¨èµ„æºä½¿ç”¨

3. **ä¸šåŠ¡æŒ‡æ ‡ä»ªè¡¨æ¿**
   - ç”¨æˆ·æ´»è·ƒåº¦
   - åŠŸèƒ½ä½¿ç”¨ç»Ÿè®¡
   - é¡µé¢è®¿é—®é‡
   - æ€§èƒ½æŒ‡æ ‡

### è‡ªå®šä¹‰é¢æ¿

```bash
# å¯¼å…¥è‡ªå®šä¹‰ä»ªè¡¨æ¿
# 1. å°†JSONæ–‡ä»¶æ”¾åˆ° config/grafana/dashboards/
# 2. é‡å¯GrafanaæœåŠ¡
docker restart online-time-grafana
```

## ğŸ”„ å‡çº§å’Œç»´æŠ¤

### ç³»ç»Ÿæ›´æ–°

```bash
# æ£€æŸ¥å¯ç”¨æ›´æ–°
./scripts/maintenance.sh monthly

# æ›´æ–°éƒ¨ç½²
./update.sh

# éªŒè¯æ›´æ–°ç»“æœ
./scripts/health-check.sh
```

### é…ç½®ç®¡ç†

```bash
# å¤‡ä»½é…ç½®æ–‡ä»¶
./scripts/ops-quick.sh backup

# éªŒè¯é…ç½®æ–‡ä»¶
docker-compose -f docker-compose.ha.yml config

# é‡è½½é…ç½®
./deploy.sh ha --force
```

## ğŸ“š æ–‡æ¡£å’Œèµ„æº

### æ ¸å¿ƒæ–‡æ¡£

- **[è¿ç»´ç›‘æ§æŒ‡å—](MONITORING.md)** - è¯¦ç»†çš„ç›‘æ§é…ç½®å’Œä½¿ç”¨è¯´æ˜
- **[éƒ¨ç½²è¯´æ˜](README.md)** - å®Œæ•´çš„éƒ¨ç½²å’Œé…ç½®æŒ‡å—
- **[å¿«é€Ÿå¼€å§‹](QUICK_START.md)** - å¿«é€Ÿéƒ¨ç½²å’ŒåŸºç¡€ä½¿ç”¨

### é…ç½®æ–‡ä»¶

- **ç¯å¢ƒå˜é‡**: `.env.example`, `.env.monitoring`
- **Dockeré…ç½®**: `docker-compose.ha.yml`
- **ç›‘æ§é…ç½®**: `config/monitoring/`
- **ä»ªè¡¨æ¿é…ç½®**: `config/grafana/dashboards/`

### è„šæœ¬å·¥å…·

- **å¥åº·æ£€æŸ¥**: `scripts/health-check.sh`
- **æ€§èƒ½ç›‘æ§**: `scripts/monitor.sh`  
- **æ•…éšœè¯Šæ–­**: `scripts/diagnose.sh`
- **ç³»ç»Ÿç»´æŠ¤**: `scripts/maintenance.sh`
- **å¿«é€Ÿè¿ç»´**: `scripts/ops-quick.sh`

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸä¼˜åŒ– (1-2å‘¨)

- [ ] æ·»åŠ ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§
- [ ] ä¼˜åŒ–å‘Šè­¦è§„åˆ™ç²¾ç¡®åº¦
- [ ] å¢åŠ è‡ªåŠ¨æ¢å¤æœºåˆ¶
- [ ] å®Œå–„æ–‡æ¡£å’ŒåŸ¹è®­

### ä¸­æœŸæ”¹è¿› (1-2æœˆ)

- [ ] é›†æˆAPMå·¥å…·
- [ ] æ·»åŠ åˆ†å¸ƒå¼è¿½è¸ª
- [ ] å®ç°æ™ºèƒ½å‘Šè­¦
- [ ] å¢åŠ å®¹é‡è§„åˆ’åŠŸèƒ½

### é•¿æœŸè§„åˆ’ (3-6æœˆ)

- [ ] å¤šé›†ç¾¤ç›‘æ§æ”¯æŒ
- [ ] AIé©±åŠ¨çš„å¼‚å¸¸æ£€æµ‹
- [ ] è‡ªåŠ¨åŒ–æ•…éšœæ¢å¤
- [ ] æˆæœ¬ä¼˜åŒ–åˆ†æ

## ğŸ“ æ”¯æŒå’Œè”ç³»

### æŠ€æœ¯æ”¯æŒ

- **è¿ç»´å›¢é˜Ÿ**: ops@yourcompany.com
- **å¼€å‘å›¢é˜Ÿ**: dev@yourcompany.com  
- **ç´§æ€¥è”ç³»**: 24/7 on-callæ”¯æŒ

### ç¤¾åŒºèµ„æº

- **é¡¹ç›®ä»“åº“**: https://github.com/your-org/online-time
- **æ–‡æ¡£ä¸­å¿ƒ**: https://docs.yourcompany.com
- **é—®é¢˜åé¦ˆ**: GitHub Issues

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰æ£€æŸ¥

- [ ] ç³»ç»Ÿä¾èµ–å·²å®‰è£… (Docker, Docker Compose)
- [ ] é…ç½®æ–‡ä»¶å·²å®Œæˆ (.env.prod, .env.monitoring)
- [ ] ç«¯å£æ²¡æœ‰å†²çª (80, 443, 9090, 3001ç­‰)
- [ ] å­˜å‚¨ç©ºé—´å……è¶³ (è‡³å°‘20GB)
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸

### éƒ¨ç½²åéªŒè¯

- [ ] æ‰€æœ‰å®¹å™¨æ­£å¸¸è¿è¡Œ
- [ ] ä¸»åº”ç”¨å¯ä»¥è®¿é—®
- [ ] ç›‘æ§é¢æ¿æ­£å¸¸æ˜¾ç¤º
- [ ] å‘Šè­¦è§„åˆ™æ­£ç¡®è§¦å‘
- [ ] æ—¥å¿—æ­£å¸¸æ”¶é›†
- [ ] å®šæ—¶ä»»åŠ¡æ­£ç¡®é…ç½®

### æ—¥å¸¸è¿ç»´æ£€æŸ¥

- [ ] æ¯æ—¥å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] ç³»ç»Ÿèµ„æºä½¿ç”¨æ­£å¸¸
- [ ] æ— å…³é”®å‘Šè­¦
- [ ] å¤‡ä»½ä»»åŠ¡æˆåŠŸæ‰§è¡Œ
- [ ] æ—¥å¿—æ— å¼‚å¸¸é”™è¯¯

---

**æœ€åæ›´æ–°**: $(date)
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**ç»´æŠ¤å›¢é˜Ÿ**: è¿ç»´å›¢é˜Ÿ