<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ¨çº¿é—¹é’ŸåŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .feature-item {
            padding: 10px;
            margin: 10px 0;
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            border-radius: 4px;
        }
        .completed {
            background: #f0fdf4;
            border-left-color: #22c55e;
        }
        .enhanced {
            background: #fefce8;
            border-left-color: #eab308;
        }
        button {
            background: #0ea5e9;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0284c7;
        }
        .audio-test {
            margin: 10px 0;
            padding: 10px;
            background: #f8fafc;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”” åœ¨çº¿é—¹é’Ÿç³»ç»Ÿ - åŠŸèƒ½éªŒè¯</h1>
    
    <div class="test-section">
        <h2>âœ… å·²å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½</h2>
        
        <div class="feature-item completed">
            <h3>ğŸµ é«˜çº§éŸ³é¢‘ç³»ç»Ÿ</h3>
            <ul>
                <li>âœ… 11ç§ä¸åŒçš„é—¹é’Ÿå£°éŸ³ï¼ˆæ—¶é’Ÿã€èœ‚é¸£å£°ã€å…¬é¸¡å£°ã€è­¦ç¬›å£°ã€æ ¸å¼¹ã€å¤–æ˜Ÿäººã€é›¨å£°ã€ç‚¸å¼¹ã€ç¥ç§˜ä¹‹å£°ã€é’Ÿå£°ã€ç™½å™ªéŸ³ï¼‰</li>
                <li>âœ… Web Audio API åˆæˆéŸ³é¢‘ï¼Œæ— éœ€å¤–éƒ¨éŸ³é¢‘æ–‡ä»¶</li>
                <li>âœ… éŸ³é‡æ§åˆ¶å’Œå£°éŸ³æµ‹è¯•åŠŸèƒ½</li>
                <li>âœ… å¾ªç¯æ’­æ”¾ç›´åˆ°ç”¨æˆ·åœæ­¢</li>
                <li>âœ… éŸ³é¢‘é¢„åŠ è½½å’Œé”™è¯¯å¤„ç†</li>
            </ul>
            
            <div class="audio-test">
                <h4>éŸ³é¢‘æµ‹è¯•ï¼š</h4>
                <button onclick="testAudio('clock')">æµ‹è¯•æ—¶é’Ÿå£°</button>
                <button onclick="testAudio('beep')">æµ‹è¯•èœ‚é¸£å£°</button>
                <button onclick="testAudio('rooster')">æµ‹è¯•å…¬é¸¡å£°</button>
                <button onclick="testAudio('siren')">æµ‹è¯•è­¦ç¬›å£°</button>
                <button onclick="stopAudio()">åœæ­¢æ’­æ”¾</button>
            </div>
        </div>

        <div class="feature-item completed">
            <h3>â° ç²¾ç¡®æ—¶é—´ç®¡ç†</h3>
            <ul>
                <li>âœ… é«˜ç²¾åº¦å®šæ—¶å™¨ç³»ç»Ÿ (HighPrecisionTimer)</li>
                <li>âœ… requestAnimationFrame é©±åŠ¨çš„ç²¾ç¡®è®¡æ—¶</li>
                <li>âœ… é˜²æ­¢é¡µé¢ä¼‘çœ  (Screen Wake Lock API)</li>
                <li>âœ… é¡µé¢éšè—/æ˜¾ç¤ºæ—¶çš„æ—¶é—´åŒæ­¥</li>
                <li>âœ… æµè§ˆå™¨é€šçŸ¥æƒé™å¤„ç†</li>
                <li>âœ… æ—¶åŒºå¤„ç†å’Œæ—¶é—´æ ¼å¼åŒ–</li>
            </ul>
        </div>

        <div class="feature-item completed">
            <h3>ğŸ”„ çŠ¶æ€ç®¡ç†å’ŒæŒä¹…åŒ–</h3>
            <ul>
                <li>âœ… Zustand å…¨å±€çŠ¶æ€ç®¡ç†</li>
                <li>âœ… localStorage æ•°æ®æŒä¹…åŒ–</li>
                <li>âœ… é—¹é’Ÿåˆ—è¡¨è‡ªåŠ¨ä¿å­˜å’Œæ¢å¤</li>
                <li>âœ… ç”¨æˆ·è®¾ç½®æŒä¹…åŒ–ï¼ˆä¸»é¢˜ã€éŸ³é‡ã€æ ¼å¼ç­‰ï¼‰</li>
                <li>âœ… é¡µé¢åˆ·æ–°åçŠ¶æ€å®Œå…¨æ¢å¤</li>
            </ul>
        </div>

        <div class="feature-item completed">
            <h3>ğŸš€ æ€§èƒ½ä¼˜åŒ–</h3>
            <ul>
                <li>âœ… Web Workers æ”¯æŒï¼ˆå¯é€‰ï¼Œç”¨äºå¤æ‚æ—¶é—´è®¡ç®—ï¼‰</li>
                <li>âœ… ç»„ä»¶æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²</li>
                <li>âœ… éŸ³é¢‘å¼•æ“å•ä¾‹æ¨¡å¼</li>
                <li>âœ… å†…å­˜æ³„æ¼é˜²æŠ¤</li>
                <li>âœ… React Hook ä¼˜åŒ–å’Œä¾èµ–ç®¡ç†</li>
            </ul>
        </div>

        <div class="feature-item enhanced">
            <h3>ğŸŒŸ å¢å¼ºåŠŸèƒ½</h3>
            <ul>
                <li>âœ… è´ªç¡åŠŸèƒ½ï¼ˆå¯é…ç½®åˆ†é’Ÿæ•°ï¼Œé»˜è®¤10åˆ†é’Ÿï¼‰</li>
                <li>âœ… å¤šé—¹é’Ÿå¹¶å‘æ”¯æŒ</li>
                <li>âœ… é—¹é’Ÿå†å²å’Œç»Ÿè®¡</li>
                <li>âœ… æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢</li>
                <li>âœ… å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…ç§»åŠ¨ç«¯</li>
                <li>âœ… æµè§ˆå™¨é€šçŸ¥é›†æˆ</li>
                <li>âœ… é—¹é’Ÿé‡å¤è®¾ç½®</li>
                <li>âœ… å¿«é€Ÿé¢„è®¾æ—¶é—´</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ›  æŠ€æœ¯æ ˆå’Œæ¶æ„</h2>
        <div class="feature-item">
            <h3>å‰ç«¯æ¡†æ¶</h3>
            <ul>
                <li>React 19 + TypeScript</li>
                <li>Zustand çŠ¶æ€ç®¡ç†</li>
                <li>Tailwind CSS + DaisyUI</li>
                <li>Vite æ„å»ºå·¥å…·</li>
                <li>Date-fns æ—¶é—´å¤„ç†</li>
                <li>Lucide React å›¾æ ‡</li>
            </ul>
        </div>

        <div class="feature-item">
            <h3>æ ¸å¿ƒå·¥å…·ç±»</h3>
            <ul>
                <li><strong>audioEngine.ts</strong> - é«˜çº§éŸ³é¢‘å¼•æ“</li>
                <li><strong>timeUtils.ts</strong> - æ—¶é—´å¤„ç†å·¥å…·</li>
                <li><strong>timeWorker.ts</strong> - Web Worker æ—¶é—´è®¡ç®—</li>
                <li><strong>alarmStore.ts</strong> - çŠ¶æ€ç®¡ç†ä¸­å¿ƒ</li>
                <li><strong>useTimer.ts</strong> - é«˜ç²¾åº¦å®šæ—¶å™¨Hook</li>
                <li><strong>useAlarmSound.ts</strong> - éŸ³é¢‘æ’­æ”¾Hook</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“± åŠŸèƒ½æ¼”ç¤º</h2>
        <div class="feature-item">
            <h3>ç°åœ¨æ—¶é—´</h3>
            <div id="current-time" style="font-size: 2em; font-family: monospace; text-align: center; color: #0ea5e9;">
                åŠ è½½ä¸­...
            </div>
        </div>

        <div class="feature-item">
            <h3>æµè§ˆå™¨å…¼å®¹æ€§æ£€æµ‹</h3>
            <div id="compatibility-info">
                <p>ğŸ” æ£€æµ‹ä¸­...</p>
            </div>
        </div>

        <div class="feature-item">
            <h3>å¿«é€Ÿæµ‹è¯•</h3>
            <button onclick="testNotification()">æµ‹è¯•æµè§ˆå™¨é€šçŸ¥</button>
            <button onclick="testWakeLock()">æµ‹è¯•é˜²ä¼‘çœ </button>
            <button onclick="testWebWorker()">æµ‹è¯•Web Worker</button>
        </div>
    </div>

    <script>
        // ç®€å•çš„Web Audio APIæµ‹è¯•
        let audioContext;
        let currentOscillator;

        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function testAudio(soundType) {
            initAudio();
            stopAudio();

            const frequencies = {
                clock: 800,
                beep: 1000,
                rooster: 600,
                siren: 440
            };

            const frequency = frequencies[soundType] || 800;
            currentOscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            currentOscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            currentOscillator.frequency.value = frequency;
            currentOscillator.type = 'square';
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);

            currentOscillator.start();
            
            // 3ç§’åè‡ªåŠ¨åœæ­¢
            setTimeout(stopAudio, 3000);
        }

        function stopAudio() {
            if (currentOscillator) {
                currentOscillator.stop();
                currentOscillator = null;
            }
        }

        function testNotification() {
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    new Notification('é—¹é’Ÿæµ‹è¯•', {
                        body: 'é€šçŸ¥åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼',
                        icon: '/vite.svg'
                    });
                } else if (Notification.permission !== 'denied') {
                    Notification.requestPermission().then(permission => {
                        if (permission === 'granted') {
                            new Notification('é—¹é’Ÿæµ‹è¯•', {
                                body: 'é€šçŸ¥æƒé™å·²è·å–ï¼',
                                icon: '/vite.svg'
                            });
                        }
                    });
                } else {
                    alert('é€šçŸ¥æƒé™è¢«æ‹’ç»');
                }
            } else {
                alert('æµè§ˆå™¨ä¸æ”¯æŒé€šçŸ¥');
            }
        }

        let wakeLock = null;
        async function testWakeLock() {
            if ('wakeLock' in navigator) {
                try {
                    wakeLock = await navigator.wakeLock.request('screen');
                    alert('é˜²ä¼‘çœ å·²æ¿€æ´»ï¼(5ç§’åè‡ªåŠ¨é‡Šæ”¾)');
                    setTimeout(() => {
                        if (wakeLock) {
                            wakeLock.release();
                            wakeLock = null;
                        }
                    }, 5000);
                } catch (err) {
                    alert('é˜²ä¼‘çœ è¯·æ±‚å¤±è´¥: ' + err.message);
                }
            } else {
                alert('æµè§ˆå™¨ä¸æ”¯æŒé˜²ä¼‘çœ ');
            }
        }

        function testWebWorker() {
            if (window.Worker) {
                const worker = new Worker('data:application/javascript;base64,' + 
                    btoa('self.postMessage("Web Worker å·¥ä½œæ­£å¸¸ï¼");'));
                worker.onmessage = function(e) {
                    alert(e.data);
                    worker.terminate();
                };
                worker.onerror = function() {
                    alert('Web Worker æµ‹è¯•å¤±è´¥');
                };
            } else {
                alert('æµè§ˆå™¨ä¸æ”¯æŒWeb Worker');
            }
        }

        // æ›´æ–°å½“å‰æ—¶é—´
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                now.toLocaleTimeString('zh-CN', { 
                    hour: '2-digit', 
                    minute: '2-digit', 
                    second: '2-digit' 
                });
        }

        // æ£€æµ‹æµè§ˆå™¨å…¼å®¹æ€§
        function checkCompatibility() {
            const features = {
                'ğŸ”Š Web Audio API': 'AudioContext' in window || 'webkitAudioContext' in window,
                'ğŸ“¢ Notifications': 'Notification' in window,
                'ğŸ›¡ï¸ Wake Lock': 'wakeLock' in navigator,
                'ğŸ‘· Web Workers': 'Worker' in window,
                'ğŸ’¾ Local Storage': 'localStorage' in window,
                'ğŸ¬ Animation Frame': 'requestAnimationFrame' in window
            };

            const info = document.getElementById('compatibility-info');
            info.innerHTML = Object.entries(features)
                .map(([name, supported]) => 
                    `<p>${supported ? 'âœ…' : 'âŒ'} ${name}</p>`
                ).join('');
        }

        // åˆå§‹åŒ–
        setInterval(updateTime, 1000);
        updateTime();
        checkCompatibility();

        console.log('ğŸ”” åœ¨çº¿é—¹é’Ÿç³»ç»Ÿå·²åŠ è½½');
        console.log('ä¸»è¦ç‰¹æ€§:');
        console.log('- 11ç§é«˜è´¨é‡åˆæˆéŸ³é¢‘');
        console.log('- é«˜ç²¾åº¦æ—¶é—´ç®¡ç†');
        console.log('- å®Œæ•´çš„æ•°æ®æŒä¹…åŒ–');
        console.log('- ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢');
        console.log('- å®Œå–„çš„é”™è¯¯å¤„ç†');
    </script>
</body>
</html>